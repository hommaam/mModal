/*!
 * jQuery mModal v1.3
 * Copyright 2015-2016 maam.inc
 * Contributing Author: Hiroki Homma
 * Require for jQuery v1.7 or above
 */
!function(o){o.mModal=function(e){function n(e){"function"==typeof l.before_open&&l.before_open(e),setTimeout(function(){v&&(d.on("touchstart.mModal",function(o){i=o.originalEvent.touches[0].pageY}),o(window).on("touchmove.mModal",function(o){o.preventDefault?o.preventDefault():o.returnValue=!1,o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}),d.on("touchmove.mModal",function(e){e.stopPropagation(),s=i-e.originalEvent.touches[0].pageY,(d.scrollTop()<=0&&0>s||d.scrollTop()>=u.height()-o(window).height()&&s>0)&&(e.preventDefault?e.preventDefault():e.returnValue=!1)})),r.addClass(l.opened_classname).css({overflow:"hidden"}),d.css({display:"block"}),l.scroll_top&&(u.scrollTop(0),v&&d.scrollTop(0)),setTimeout(function(){switch(m){case"velocity":d.velocity({opacity:1},{duration:l.duration,easing:l.easing});break;case"css_transition":d.css({opacity:1});break;case"jquery_animate":d.animate({opacity:1},{duration:l.duration,easing:l.easing})}a=setTimeout(function(){"function"==typeof l.after_open&&l.after_open(e)},l.duration+16)},16)},16)}function t(e){"function"==typeof l.before_close&&l.before_close(e),clearTimeout(a),setTimeout(function(){switch(m){case"velocity":d.velocity({opacity:0},{duration:l.duration,easing:l.easing});break;case"css_transition":d.css({opacity:0});break;case"jquery_animate":d.animate({opacity:0},{duration:l.duration,easing:l.easing})}setTimeout(function(){d.css({display:"none"}),r.css({overflow:"visible"}),r.removeClass(l.opened_classname),v&&(d.off("touchstart.mModal"),o(window).off("touchmove.mModal"),d.off("touchmove.mModal")),"function"==typeof l.after_close&&l.after_close(e)},l.duration+16)},16)}var a,i,s,c={type:"fade",scroll_top:!0,duration:260,easing:"swing",velocity_js:!0,css_animation:!0,before_open:function(o){},after_open:function(o){},before_close:function(o){},after_close:function(o){},open_classname:"mModal-open",close_classname:"mModal-close",page_classname:"mModal-page",modal_classname:"mModal-modal",modal_cont_classname:"mModal-modal_cont",opened_classname:"mModal-opened"},l=o.extend({},c,e),r=o("body"),f=o("."+l.open_classname),d=o("."+l.modal_classname),u=o("."+l.modal_cont_classname),p=(o("."+l.page_classname),o("."+l.close_classname)),m="jquery_animate",_=window.navigator.userAgent.toLowerCase(),v=-1!=_.indexOf("windows")&&-1!=_.indexOf("touch")&&-1==_.indexOf("tablet pc")||-1!=_.indexOf("ipad")||-1!=_.indexOf("iphone")||-1!=_.indexOf("ipod")||-1!=_.indexOf("android")||-1!=_.indexOf("firefox")&&-1!=_.indexOf("tablet")||-1!=_.indexOf("firefox")&&-1!=_.indexOf("mobile")||-1!=_.indexOf("kindle")||-1!=_.indexOf("silk")||-1!=_.indexOf("playbook")||-1!=_.indexOf("windows")&&-1!=_.indexOf("phone")||-1!=_.indexOf("blackberry")?!0:!1;l.velocity_js===!0&&"undefined"!=typeof o.fn.velocity?m="velocity":l.css_animation===!0&&!function(){var o,e=document.createElement("div"),n=["transition","MozTransition","WebkitTransition","OTransition","msTransition"];for(o=0;o<n.length;o++)if(n[o]in e.style){m="css_transition";break}}();(function(){f.on("click.mModal",function(o){o.stopPropagation?o.stopPropagation():"",o.preventDefault?o.preventDefault():o.returnValue=!1,n(o)}),p.on("click.mModal",function(o){o.stopPropagation?o.stopPropagation():"",o.preventDefault?o.preventDefault():o.returnValue=!1,t(o)}),d.css({opacity:0,display:"none",zIndex:"9000",position:"fixed",top:0,left:0,width:"100%",height:"100%",overflowScrolling:"touch",backfaceVisibility:"hidden"}),"css_transition"===m&&d.css({transition:"opacity "+l.duration+"ms ease-in-out"}),u.css({width:"100%",height:"100%"}),v?(d.css({overflow:"auto"}),u.css({height:"auto",oveflow:"visible"})):u.css({overflow:"auto"})})()}}(jQuery);
